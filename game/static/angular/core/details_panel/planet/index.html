<div class="tab-container tile">
    <ul class="nav tab nav-tabs">
        <li ng-repeat="tab in tabs">
            <a ui-sref="{{tab.route}}">{{tab.heading}}</a>
        </li>
    </ul>

    <div class="tab-content">
        <ui-view>
            <ul class="list-unstyled">
                <li><b>Type:</b> {{ planet.type }}</li>
                <li><b>ID:</b> {{ planet.id }}</li>
            </ul>
            Planet description
            Planet description
            Planet description
            Planet description
            Planet description
            Planet description
            Planet description
            Planet description
            Planet description
            Planet description
            Planet description
            Planet description
            <hr />
            Rich in various resources.<br />
            May contain some rare earth elements.<br />
            No solid structures are built on this planet.<br />
            Buildings: Building1, Building2, ...
        </ui-view>
    </div>
</div>

<tabset>
<tab
        ng-repeat="building in planet.buildings track by $index"
        heading="{{building.type}}"
        select="changeBuilding(building)">
<div when="Shipyard">
    <!--<h4>Available ships</h4>-->
    <table class="table table-hover">
        <thead>
        <tr>
            <th>Ship</th>
            <th>Resources</th>
            <th>ETA</th>
            <th>Order</th>
        </tr>
        </thead>
        <tbody ng-init="ship_resources=controlPanel.currentShipDetails.resources">
        <tr ng-repeat="(ship, details) in building.available_ships">
            <td>{{ship}}</td>
            <td>
                <ul class="list-unstyled">
                    <li
                            ng-repeat="(resource, quantity) in details.resources"
                            ng-class="{true:'text-success', false:'text-danger'}[ship_resources[resource] > quantity]"
                            >
                        {{resource}}: {{quantity}}
                    </li>
                </ul>
            </td>
            <td>{{details.time}}s</td>
            <td><button class="btn btn-default btn-sm" ng-click="order(building.id, ship)">Order</button></td>
        </tr>
        </tbody>
    </table>
    <!--
    <h4>Queue</h4>
    <table class="table table-hover">
        <thead>
        <tr>
            <th>Ship</th>
            <th>Contractor</th>
            <th>ETA</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Raven</td>
            <td>test</td>
            <td>5:30</td>
        </tr>
        <tr>
            <td>Owl</td>
            <td>test</td>
            <td>15:23</td>
        </tr>
        </tbody>
    </table>
    -->
</div>
<div when="Warehouse">
    <br />
    Warehouse allows you to store your resources.
    <table class="table table-hover">
        <thead>
        <tr>
            <th>Resource</th>
            <th>Warehouse</th>
            <th>Ship</th>
            <th>Quantity</th>
            <th>Load</th>
            <th>Unload</th>
        </tr>
        </thead>
        <tbody ng-init="resources=warehouseResources(building)"> <!-- TODO -->
        <tr ng-repeat="(resource, details) in resources track by $index">
            <td>{{resource}}</td>
            <td ng-click="detailsPanel.warehouse_quantities[$index]=details.warehouse">
                <a href="#">{{details.warehouse}}</a>
            </td>
            <td ng-click="detailsPanel.warehouse_quantities[$index]=details.ship">
                <a href="#">{{details.ship}}</a>
            </td>
            <td><input class="form-control input-sm" style="width: 50px" type="text" ng-model="detailsPanel.warehouse_quantities[$index]"/></td>
            <td>
                <button class="btn btn-default btn-sm" ng-click="store(building.id, resource, detailsPanel.warehouse_quantities[$index], 'load')">
                    Load
                </button>
            </td>
            <td>
                <button class="btn btn-default btn-sm" ng-click="store(building.id, resource, detailsPanel.warehouse_quantities[$index], 'unload')">
                    Unload
                </button>
            </td>
        </tr>
        </tbody>
    </table>
</div>


</div>
</div>
</tab>
</tabset>